{% extends 'black_invoices/base/base.html' %}
{% load static %}

{% block content %}
<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-md-9">
                <h3 class="card-title">{{ titulo }}</h3>
            </div>
            <div class="col-md-3 text-right">
                <a href="{% url 'black_invoices:cliente_create' %}" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Nuevo Cliente
                </a>
            </div>
        </div>
    </div>
    <div class="card-body">
        <!-- Filtros de búsqueda -->
        <div class="row mb-4">
            <div class="col-md-4">
                <label for="filtro_cedula">Buscar por Cédula:</label>
                <input type="text" class="form-control" id="filtro_cedula" placeholder="V12345678 o E12345678">
            </div>
            <div class="col-md-4">
                <label for="filtro_nombre">Buscar por Nombre:</label>
                <input type="text" class="form-control" id="filtro_nombre" placeholder="Nombre o apellido">
            </div>
            <div class="col-md-2">
                <label>&nbsp;</label>
                <button id="btnLimpiarFiltros" class="btn btn-secondary form-control">
                    <i class="fas fa-sync"></i> Limpiar
                </button>
            </div>
        </div>

        <table id="tabla-clientes" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Cédula</th>
                    <th>Nombre Completo</th>
                    <th>Teléfono</th>
                    <th>Email</th>
                    <th>Dirección</th>
                    <th>Fecha Registro</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for cliente in clientes %}
                <tr>
                    <td>{{ cliente.cedula_formateada }}</td>
                    <td>{{ cliente.nombre_completo }}</td>
                    <td>{{ cliente.telefono }}</td>
                    <td>
                        {% if cliente.email %}
                            {{ cliente.email }}
                        {% else %}
                            <span class="text-muted">No registrado</span>
                        {% endif %}
                    </td>
                    <td>{{ cliente.direccion|truncatechars:50 }}</td>
                    <td>{{ cliente.fecha_registro|date:'d/m/Y' }}</td>
                    <td>
                        <div class="btn-group">
                            <a href="{% url 'black_invoices:cliente_detail' cliente.id %}"
                               class="btn btn-info btn-sm" title="Ver detalles">
                                <i class="fas fa-eye"></i>
                            </a>
                            <a href="{% url 'black_invoices:cliente_update' cliente.id %}"
                               class="btn btn-warning btn-sm" title="Editar">
                                <i class="fas fa-edit"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="text-center">No hay clientes registrados.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Card de información -->
<div class="row mt-3">
    <div class="col-md-6">
        <div class="card card-info">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-info-circle"></i> Información
                </h3>
            </div>
            <div class="card-body">
                <p><strong>Total de clientes:</strong> {{ clientes|length }}</p>
                <p><strong>Búsqueda:</strong> Utilice los filtros para encontrar clientes específicos</p>
                <p><strong>Cédula:</strong> Los clientes se identifican principalmente por su cédula</p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card card-success">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-chart-bar"></i> Estadísticas
                </h3>
            </div>
            <div class="card-body">
                <p><strong>Con email:</strong>
                    {{ clientes|length }} <!-- Necesitaremos calcular esto en la vista -->
                </p>
                <p><strong>Registrados hoy:</strong>
                    {{ clientes|length }} <!-- Necesitaremos calcular esto en la vista -->
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.2.2/css/buttons.bootstrap4.min.css">

<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.bootstrap4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.colVis.min.js"></script>

<script>
// Para el botón de IMPRESIÓN
const imageUrl = "{% static 'img/the_black.jpeg' %}";

// Para el botón PDF, USAREMOS BASE64.
// ¡¡¡REEMPLAZA ESTA CADENA CON LA CADENA BASE64 REAL DE TU IMAGEN 'the_black.jpeg'!!!
const imageBase64 = "data:image/jpeg;base64,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";

$(document).ready(function() {
    var fechaActual = new Date().toLocaleDateString('es-ES');
    // Título general para el nombre del archivo y similar
    var tituloReporteArchivo = 'Lista de Clientes - ' + fechaActual;

    // --- INICIO: Definiciones para el Membrete (reutilizadas) ---
    var nombreEmpresa = 'INDUSTRIA & HERRAMIENTA EL NEGRITO, C.A.';
    var rifEmpresa = 'RIF: J-406050717';
    var direccionEmpresa = 'CR 10 ENTRE CALLES 4 Y 5 EDIF DOÑA EDITH PISO 1 OF 2 BARRIO MATURIN GUANARE PORTUGUESA';
    var telefonosEmpresa = 'Teléfonos: 0257-5143082 / 0257-5143082';
    // Título específico que aparecerá en el cuerpo del reporte, debajo del membrete
    var tituloDelMembreteReporte = 'LISTADO DE CLIENTES';
    // --- FIN: Definiciones para el Membrete ---

    var table = $('#tabla-clientes').DataTable({
        "responsive": true,
        "lengthChange": true,
        "autoWidth": false,
        "order": [[0, 'asc']], // Ordenar por cédula
        "dom": "<'row'<'col-sm-12 col-md-6'B><'col-sm-12 col-md-6'f>>" +
               "<'row'<'col-sm-12'tr>>" +
               "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
        "buttons": [
            {
                extend: 'colvis',
                text: '<i class="fas fa-columns"></i> Columnas',
                className: 'btn btn-secondary' // Consistencia con otras tablas
            },
            { // Botón PDF
                extend: 'pdf',
                text: '<i class="fas fa-file-pdf"></i> PDF',
                className: 'btn btn-danger',
                title: tituloReporteArchivo,
                exportOptions: {
                    columns: [0, 1, 2, 3, 4, 5], // Cédula, Nombre, Teléfono, Email, Dirección, Fecha
                    stripHtml: true,
                    format: {
                        body: function ( data, row, column, node ) {
                            try {
                                // Limpiar HTML y espacios en blanco
                                return typeof data === 'string' ? data.replace(/<[^>]*>/g, '').trim() : data;
                            } catch (e) {
                                console.error("Error en format.body para PDF (Clientes):", e, "Col:", column, "Data:", data);
                                return typeof data === 'string' ? data.replace(/<[^>]*>/g, '').trim() : data;
                            }
                        }
                    }
                },
                customize: function(doc) {
                    doc.pageMargins = [30, 100, 30, 60];
                    doc.defaultStyle.fontSize = 9;
                    doc.styles.tableHeader.fontSize = 10;
                    doc.styles.tableHeader.fillColor = '#212529';
                    doc.styles.tableHeader.color = 'white';
                    doc.styles.tableHeader.alignment = 'center';
                    doc.styles.tableBodyEven = {};
                    doc.styles.tableBodyOdd = {};

                    doc['header'] = (function(currentPage, pageCount, pageSize) {
                        return {
                            columns: [
                                (imageBase64 && imageBase64 !== "codigo base64" ?
                                    { image: imageBase64, width: 100, alignment: 'left', margin: [30, 20, 0, 0] } :
                                    {text: '', width: 100, margin: [30, 20, 0, 0]}),
                                {
                                    alignment: 'right', margin: [0, 20, 30, 0],
                                    stack: [
                                        { text: nombreEmpresa, bold: true, fontSize: 13, color: '#333333' },
                                        { text: rifEmpresa, fontSize: 8, color: '#333333' },
                                        { text: direccionEmpresa, fontSize: 8, color: '#333333', margin: [0, 2, 0, 0] },
                                        { text: telefonosEmpresa, fontSize: 8, color: '#333333' }
                                    ]
                                }
                            ]
                        };
                    });

                    doc.content.splice(0, 0, {
                        text: 'The Black System - ' + tituloDelMembreteReporte,
                        fontSize: 12, bold: true, alignment: 'center', margin: [0, 0, 0, 15]
                    });

                    var tableNode = null;
                    for (var i = 0; i < doc.content.length; i++) {
                        if (doc.content[i].table) {
                            tableNode = doc.content[i];
                            break;
                        }
                    }

                    if (tableNode) {
                        // Para 6 columnas: Cédula, Nombre, Teléfono, Email, Dirección, Fecha
                        tableNode.table.widths = ['15%', '*', '15%', '20%', '25%', '15%'];
                        // Cédula y Teléfono más pequeños, Nombre toma espacio principal '*',
                        // Email y Dirección con espacio medio, Fecha pequeña.
                    } else {
                        console.error("No se encontró la tabla principal en doc.content para aplicar anchos (Clientes).");
                    }

                    doc['footer'] = function(page, pages) {
                        return {
                            columns: [
                                { alignment: 'left', text: ['Creado el: ', { text: fechaActual }], margin: [30, 0, 0, 0] },
                                { alignment: 'right', text: ['Página ', { text: page.toString() }, ' de ', { text: pages.toString() }], margin: [0, 0, 30, 0] }
                            ]
                        };
                    };
                }
            },
            { // Botón Excel
                extend: 'excel',
                text: '<i class="fas fa-file-excel"></i> Excel',
                className: 'btn btn-success',
                title: tituloReporteArchivo,
                messageTop: nombreEmpresa + '\n' + rifEmpresa + '\n' + direccionEmpresa + '\n' + telefonosEmpresa + '\n\n' + tituloDelMembreteReporte + '\n\nThe Black System - ' + tituloReporteArchivo,
                exportOptions: {
                    columns: [0, 1, 2, 3, 4, 5],
                    format: {
                        body: function ( data, row, column, node ) {
                            return data;
                        }
                    }
                }
            },
            { // Botón Imprimir
                extend: 'print',
                text: '<i class="fas fa-print"></i> Imprimir',
                className: 'btn btn-dark',
                title: ' ',
                exportOptions: {
                    columns: [0, 1, 2, 3, 4, 5]
                },
                customize: function(win) {
                    $(win.document.body).css('font-size', '10pt');
                    $(win.document.body).find('h1').remove();

                    var membreteHTML = `
                        <div style="margin-bottom: 20px; overflow: auto; padding: 0 20px;">
                            ${imageUrl ? `<div style="float: left; width: 25%;"><img src="${imageUrl}" style="width: 150px; height: auto;" alt="Logo"></div>` : '<div style="float: left; width: 25%;"></div>'}
                            <div style="float: right; width: ${imageUrl ? '75%' : '100%'}; text-align: right;">
                                <h3 style="margin:0; font-size: 14px;">${nombreEmpresa}</h3>
                                <p style="margin:0; font-size: 9px;">${rifEmpresa}</p>
                                <p style="margin:0; font-size: 9px;">${direccionEmpresa}</p>
                                <p style="margin:0; font-size: 9px;">${telefonosEmpresa}</p>
                            </div>
                        </div>
                        <div style="clear: both;"></div>
                        <h4 style="text-align: center; font-size: 12px; margin-top: 10px; margin-bottom: 15px;">The Black System - ${tituloDelMembreteReporte}</h4>
                    `;

                    $(win.document.body).prepend(membreteHTML);

                    $(win.document.body).find('table')
                        .addClass('compact')
                        .css('font-size', 'inherit');

                    $(win.document.body).append(
                        '<div style="text-align: center; margin-top: 20px; font-size: 8pt;">' +
                        '<p>Creado el: ' + fechaActual + '</p>' +
                        '</div>'
                    );
                }
            }
        ],
        "language": {
            "sProcessing": "Procesando...",
            "sLengthMenu": "Mostrar _MENU_ registros",
            "sZeroRecords": "No se encontraron resultados",
            "sEmptyTable": "Ningún dato disponible en esta tabla",
            "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_",
            "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0",
            "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
            "sSearch": "Buscar:",
            "oPaginate": {
                "sFirst": "Primero",
                "sLast": "Último",
                "sNext": "Siguiente",
                "sPrevious": "Anterior"
            },
            "buttons": {
                "colvis": "Columnas",
                "excel": "Excel",
                "pdf": "PDF",
                "print": "Imprimir"
            }
        }
    });

    // Filtro por cédula
    $('#filtro_cedula').on('keyup', function() {
        table.column(0).search(this.value).draw();
    });

    // Filtro por nombre
    $('#filtro_nombre').on('keyup', function() {
        table.column(1).search(this.value).draw();
    });

    // Limpiar filtros
    $('#btnLimpiarFiltros').click(function() {
        $('#filtro_cedula').val('');
        $('#filtro_nombre').val('');
        table.search('').columns().search('').draw();
    });
});
</script>
{% endblock %}
